- hosts: manager:worker
  become: yes

  vars_files:
    - vars.yml

  pre_tasks:
    - name: Installing packages
      package:
         name: "{{ openssl_packages }}"
         state: present
    - name: Create Docker configuration directories
      file:
        path: "{{ item }}"
        state: "directory"
        owner: "root"
        group: "root"
        mode: "0755"
      loop:
        - "/etc/docker"
        - "/etc/systemd/system/docker.service.d"
         
  roles:
    - role: alexinthesky.secure-docker-daemon

- import_playbook: manager-certificate.yml
